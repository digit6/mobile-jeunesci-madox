(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["out-index"],{"36b2":function(e,n,i){"use strict";i.r(n);var a=function(){var e=this,n=e.$createElement,i=e._self._c||n;return i("div",{staticClass:"animated fadeIn"},[e._m(0),i("div",{staticClass:"pa-3"},[i("v-text-field",{attrs:{flat:"","clear-icon":"mdi-close-circle",clearable:"",rounded:"",name:"name",solo:"","prepend-inner-icon":"email","background-color":"white",label:"Adresse E-mail",id:"id"},model:{value:e.user.email,callback:function(n){e.$set(e.user,"email",n)},expression:"user.email"}}),i("v-text-field",{attrs:{rounded:"",solo:"","clear-icon":"mdi-close-circle",clearable:"",flat:"","prepend-inner-icon":"lock",name:"pw",color:"primary","background-color":"white",placeholder:"Mot de passe",type:"password",maxlength:"15"},on:{keyup:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"enter",13,n.key,"Enter")?null:e.login(n)}},model:{value:e.user.password,callback:function(n){e.$set(e.user,"password",n)},expression:"user.password"}}),i("v-btn",{attrs:{id:"primary--color",rounded:"",block:"",large:"",color:"primary darken-5"},on:{click:e.login}},[i("v-icon",[e._v("mdi-login")]),e._v(" SE CONNECTER\n  ")],1),i("br"),i("v-btn",{attrs:{large:"",to:"/out/forget",text:"",color:"primary"}},[e._v("\n    Mot de passe oubli√© ?\n  ")]),i("br"),e._m(1),i("div",[i("v-btn",{attrs:{small:"",color:"blue",fab:"",dark:""},on:{click:e.loginFacebook}},[i("v-icon",[e._v("mdi-facebook")])],1)],1),i("div",{staticClass:"pt-4"},[i("v-btn",{attrs:{id:"secondary--color",rounded:"",to:"/out/register",color:"orange",large:"",dark:"",block:""}},[i("v-icon",[e._v("add")]),e._v(" S'INSCRIRE\n  ")],1)],1)],1)])},t=[function(){var e=this,n=e.$createElement,i=e._self._c||n;return i("div",[i("img",{attrs:{src:"/img/ban.jpg",alt:""}})])},function(){var e=this,n=e.$createElement,i=e._self._c||n;return i("div",{staticClass:"ui divider horizontal"},[i("span",[e._v("Se connecter via")])])}],o=(i("3e8f"),{data:function(){return{users:[],user:{email:"",password:"",auth:!1}}},mounted:function(){},apollo:{users:{query:i("3f02"),update:function(e){return console.log("Check users before"),e.jeunes}}},methods:{loginFacebook:function(){var e=this;try{var n=["email"];this.$Plugins.FacebookLogin.login({permissions:n}).then(function(n){var a="https://graph.facebook.com/v4.0/".concat(n.accessToken.userId,"?fields=name,email,first_name,last_name,short_name&access_token=").concat(n.accessToken.token,"\n");fetch(a,{headers:{"coontent-type":"application/json"}}).then(function(e){return e.json()}).then(function(n){if(e.$vs.loading({color:"green",background:"white"}),n.email){var a=!1,t={};if(e.users.length<1){var o={nom:n.name,email:n.email,auth:"facebook"};return e.$apollo.mutate({mutation:i("3931"),variables:{jeune:o}}).then(function(n){var i=n.data.createJeune.jeune;e.$store.commit("session_start",i),e.$router.replace("/apps"),setTimeout(function(){e.$vs.loading.close(),e.$Message.success("Bienvenue ".concat(e.$store.state.user.nom))},300)}).catch(function(n){e.$vs.loading.close(),e.$Message.error("Service indisponible")}),!1}e.users.forEach(function(o,s,r){if(o.email==n.email&&(a=!0,t=o),s==r.length-1)if(a)e.$store.commit("session_start",t),e.$router.replace("/apps"),setTimeout(function(){e.$vs.loading.close()},1200);else{var l={nom:n.name,email:n.email,auth:"facebook"};e.$apollo.mutate({mutation:i("3931"),variables:{jeune:l}}).then(function(n){var i=n.data.createJeune.jeune;e.$store.commit("session_start",i),e.$router.replace("/apps"),setTimeout(function(){e.$vs.loading.close(),e.$Message.success("Bienvenue ".concat(e.$store.state.user.nom))},300)}).catch(function(n){e.$vs.loading.close(),e.$Message.error("Service indisponible")})}})}else e.$vs.loading.close(),e.$Message.error("Echec d'authorization au compte");e.$vs.loading.close(),e.$Plugins.FacebookLogin.logout()}).catch(function(n){e.$vs.loading.close()})})}catch(a){console.log(a)}},login:function(){var e=this;this.$apollo.queries.users.refetch().then(),this.$vs.loading({color:"green",background:"white"});var n=new Promise(function(n,i){return e.users.forEach(function(i,a,t){return i.email==e.user.email?n({status:!0,user:i}):a==t.length-1?n({status:!1}):void 0})});n.then(function(n){n.status?n.user.password==e.user.password?(e.$store.commit("session_start",n.user),e.$router.replace("/apps"),setTimeout(function(){e.$vs.loading.close()},1600)):(e.$vs.loading.close(),e.$Message.warning("Mot de passe incorrect")):(e.$vs.loading.close(),e.$Message.error("Adresse email inconnue"))})}}}),s=o,r=i("2877"),l=Object(r["a"])(s,a,t,!1,null,null,null);n["default"]=l.exports},3931:function(e,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"jeune"}},type:{kind:"NamedType",name:{kind:"Name",value:"JeuneInput"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"createJeune"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"data"},value:{kind:"Variable",name:{kind:"Name",value:"jeune"}}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"jeune"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"nom"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"auth"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"contact"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"password"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profession"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updatedAt"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:212}};i.loc.source={body:"mutation($jeune:JeuneInput) {\n  createJeune(input:{data:$jeune}) {\n    jeune {\n      id\n      nom\n      email\n      auth\n      contact\n      password\n      profession\n      createdAt\n      updatedAt\n    }\n  }\n}\n\n",name:"GraphQL request",locationOffset:{line:1,column:1}};function a(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var i=e.type;"NamedType"===i.kind&&n.add(i.name.value)}e.selectionSet&&e.selectionSet.selections.forEach(function(e){a(e,n)}),e.variableDefinitions&&e.variableDefinitions.forEach(function(e){a(e,n)}),e.definitions&&e.definitions.forEach(function(e){a(e,n)})}var t={};(function(){i.definitions.forEach(function(e){if(e.name){var n=new Set;a(e,n),t[e.name.value]=n}})})(),e.exports=i},"3e8f":function(e,n){},"3f02":function(e,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"jeunes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"nom"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"contact"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"password"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profession"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"auth"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updatedAt"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:139}};i.loc.source={body:"query{jeunes{\n    _id\n    id,\n    email\n    nom\n      contact\n      password\n      profession\n      auth\n      createdAt\n      updatedAt\n}}",name:"GraphQL request",locationOffset:{line:1,column:1}};function a(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var i=e.type;"NamedType"===i.kind&&n.add(i.name.value)}e.selectionSet&&e.selectionSet.selections.forEach(function(e){a(e,n)}),e.variableDefinitions&&e.variableDefinitions.forEach(function(e){a(e,n)}),e.definitions&&e.definitions.forEach(function(e){a(e,n)})}var t={};(function(){i.definitions.forEach(function(e){if(e.name){var n=new Set;a(e,n),t[e.name.value]=n}})})(),e.exports=i}}]);
//# sourceMappingURL=out-index.a3805415.js.map